(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=l(t);fetch(t.href,i)}})();let y=$(window).height(),g=$(window).width(),r={},u=[],f=[],n=document.querySelector("#game-board"),a=n.getContext("2d");n.width=g;n.height=y;const h=["#171717","#2E2E2E","#454545","#5C5C5C","#737373","#8A8A8A","#5B7586","#8CA2B0","#36454F","#BF181D","#ED7377","#B35F00","#000080","#38B261","#96DEAE","#E3AE09","#FADB7C","#635345","#BEAEA1","#362624","#212121","#383838","#B7D100","#E5FF2E","#168900","#ADFF9E","#D100D1","#999999","#6B6B6B","#DEDEDE","#B0B0B0","#E4AD58","#DD9A30","#F1D4A7","#483C32","#AB9786","#7E6958","#B75CFF","#A32EFF","#5C6380","#DCDEE6","#8C8C8C","#A52217","#EE8D85","#EAE000","#BCB400","#FFFDD0","#E0B0FF","#D40032","#FF8DA7","#ED4002","#197D4B","#93E9BE","#024376"];n.style.backgroundColor=h[Math.floor(Math.random()*h.length)];$(window).on("load",function(){$("#game-start").modal("show")});$(".name-form").submit(e=>{e.preventDefault(),r.name=document.querySelector("#name-input").value,$("#game-start").modal("hide"),$(".modal").modal("hide"),$(".hiddenOnStart").removeAttr("hidden"),A()});$("#play-again").click(e=>{e.preventDefault(),window.location.reload()});function m(){S(),p(),E(),D(),w(),b(),requestAnimationFrame(m)}function p(){a.clearRect(0,0,n.width,n.height)}function E(){const e=-r.locX+n.width/2,o=-r.locY+n.height/2;a.translate(e,o)}function D(){var e;a.beginPath(),a.fillStyle=r.color,a.arc(r.locX,r.locY,r.radius,0,Math.PI*2),a.fill(),a.lineWidth=3,a.strokeStyle="rgb(0,255,0)",a.stroke();for(let o=0;o<((e=r.path)==null?void 0:e.length);o++)a.beginPath(),a.fillStyle=r.color,a.arc(r.path[o][0],r.path[o][1],r.radius/2,0,Math.PI*2),a.fill(),a.lineWidth=3,a.strokeStyle="rgb(0,255,0)",a.stroke()}function w(){u.filter(e=>e.uid!==r.uid).forEach(e=>{a.beginPath(),a.fillStyle=e.color,a.arc(e.locX,e.locY,e.radius,0,Math.PI*2),a.fill(),a.lineWidth=3,a.strokeStyle="rgb(0,255,0)",a.stroke()})}function b(){f.forEach(e=>{a.beginPath(),a.fillStyle=e.color,a.arc(e.locX,e.locY,e.radius,0,Math.PI*2),a.fill()})}function B(){$(".player-score").text(r.score||0)}function F(){$(".leader-board").empty(),u.sort((e,o)=>o.score-e.score).forEach(e=>{const o=$('<li class="leaderboard-player">').text(`${e.playerName}: ${e.score}`);$(".leader-board").append(o)})}function S(){a.setTransform(1,0,0,1,0,0)}n.addEventListener("mousemove",e=>{const o={x:e.clientX,y:e.clientY};let l,s;const t=Math.atan2(o.y-n.height/2,o.x-n.width/2)*180/Math.PI;t>=0&&t<90?(l=1-t/90,s=-(t/90)):t>=90&&t<=180?(l=-(t-90)/90,s=-(1-(t-90)/90)):t>=-180&&t<-90?(l=(t+90)/90,s=1+(t+90)/90):t<0&&t>=-90&&(l=(t+90)/90,s=1-(t+90)/90),r.xVector=l,r.yVector=s});const c=new WebSocket("ws://5.135.186.53:8090/ws");function A(){m();const e=P();r={...r,sid:e},c.send(JSON.stringify({_type:"InitMessage",data:{playerName:r.name,sid:e}}))}function P(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}c.addEventListener("message",e=>{const o=JSON.parse(e.data);switch(o&&o._type){case"InitMessageResponse":f=o.data.orbs,r.sid===o.data.playerData.sid&&(r={...r,...o.data.playerData},setInterval(()=>{c.readyState===WebSocket.OPEN&&r.uid&&r.xVector&&c.send(JSON.stringify({_type:"TickMessage",data:{uid:r.uid,xVector:r.xVector||0,yVector:r.yVector||0}}))},33));break;case"PlayerListMessageResponse":u=o.data,F();break;case"TickMessageResponse":r.sid===o.data.playerData.sid&&(r={...r,...o.data.playerData},f=o.data.orbs,B());break}});c.onclose=function(e){r.sid&&($("#game-start").modal("hide"),$("#game-over").modal("show"))};
